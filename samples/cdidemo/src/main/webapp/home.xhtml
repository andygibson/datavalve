<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"	
	xmlns:sf="http://java.sun.com/jsf/composite/spigot"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">

		<h:form id="form">

			<h:panelGrid columns="2"
				style="border : 2px solid #000000;background : #f0f0f0;padding : 16px;margin : 8px">
				<h:outputText value="First Name : " />
				<h:inputText value="#{searchCriteria.firstName}" />
				<h:outputText value="Last Name : " />
				<h:inputText value="#{searchCriteria.lastName}" />
				<h:outputText value="Phone : " />
				<h:inputText value="#{searchCriteria.phone}" />

				<h:commandButton value="Refresh" action="#{personSearch.refresh}">
					<f:ajax execute="form" render="form" />
				</h:commandButton>
			</h:panelGrid>



			<h:dataTable value="#{personResults}" var="v_person"
				styleClass="dataTable" columnClasses="smallCol,medCol,medCol">
				<h:column>
					<f:facet name="header">
						<sf:sortLink paginator="#{personSearch}" key="id"
							caption="Person Id" />
					</f:facet>
					#{v_person.id}
				</h:column>
				<h:column>
					<f:facet name="header">
						<sf:sortLink paginator="#{personSearch}" key="name" caption="Name"
							ascImageUrl="#{resources['/gfx/weld.png']}" />
					</f:facet>
					#{v_person.name}							
			    </h:column>

				<h:column>
					<f:facet name="header">
						<sf:sortLink paginator="#{personSearch}" key="phone"
							caption="Phone Number" />
					</f:facet>
					<h:outputText value="#{v_person.phone}" converter="personPhone" />
				</h:column>

			</h:dataTable>

			<sf:simplePaginator dataset="#{personSearch}"/>

		</h:form>
	</ui:define>
</ui:composition>
